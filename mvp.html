<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Collaborative Travel MVP</title>
<style>
  body {font-family: Arial, sans-serif; margin:0; padding:0; background:#f8f9fb;}
  h1,h2,h3{margin:0 0 10px 0;}
  .container{max-width:1000px; margin:auto; padding:20px;}
  button{padding:8px 15px; margin:5px; cursor:pointer; border:none; border-radius:5px; background:#ff6b6b; color:white;}
  button:hover{opacity:0.9;}
  input, select, textarea{padding:5px; margin:5px 0; width:100%;}
  .card{background:white; padding:15px; margin:10px 0; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1);}
  .card h3{margin-bottom:5px;}
  .flex{display:flex; gap:10px; flex-wrap:wrap;}
  .budget{background:#fff; padding:15px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1); margin-top:20px;}
  .trip-plan{background:#e0ffe0; padding:15px; border-radius:8px; margin-top:20px;}
  label{font-weight:bold;}
</style>
</head>
<body>
<div class="container">
  <h1>Collaborative Travel MVP</h1>

  <!-- Create Trip -->
  <div id="trip-section">
    <h2>Create Trip</h2>
    <label>Trip Name:</label>
    <input type="text" id="tripName" placeholder="Summer Europe">
    <label>Participants (comma separated):</label>
    <input type="text" id="participants" placeholder="Alice, Mark, Sofia">
    <button onclick="createTrip()">Create Trip</button>
  </div>

  <!-- Add Card -->
  <div id="card-section" style="display:none;">
    <h2>Add Idea / Card</h2>
    <label>Title:</label><input type="text" id="cardTitle">
    <label>Category:</label>
    <select id="cardCategory">
      <option>Destination</option>
      <option>Accommodation</option>
      <option>Activities</option>
      <option>Transport</option>
    </select>
    <label>Notes / URL:</label><textarea id="cardNotes"></textarea>
    <label>Estimated Cost:</label><input type="number" id="cardCost" value="0">
    <label>Responsible:</label>
    <select id="cardResponsible"></select>
    <label>Status:</label>
    <select id="cardStatus">
      <option>to-do</option>
      <option>in progress</option>
      <option>done</option>
    </select>
    <button onclick="addCard()">Add Card</button>
  </div>

  <!-- Card List -->
  <div id="cards-list"></div>

  <!-- Budget -->
  <div class="budget" id="budget-section" style="display:none;">
    <h2>Budget Overview</h2>
    <div id="budget-details"></div>
  </div>

  <!-- Generate Trip Plan -->
  <div id="plan-section" style="display:none;">
    <button onclick="generatePlan()">Generate Trip Plan</button>
    <div class="trip-plan" id="trip-plan"></div>
  </div>
</div>

<script>
let trip = {name:'', participants:[], cards:[]};

// Create Trip
function createTrip(){
  const name = document.getElementById('tripName').value.trim();
  const parts = document.getElementById('participants').value.split(',').map(p=>p.trim()).filter(p=>p);
  if(!name || parts.length===0){alert('Enter trip name and participants'); return;}
  trip.name = name;
  trip.participants = parts;
  trip.cards = [];
  document.getElementById('trip-section').style.display='none';
  document.getElementById('card-section').style.display='block';
  document.getElementById('budget-section').style.display='block';
  document.getElementById('plan-section').style.display='block';
  updateResponsibleOptions();
  updateCards();
}

// Update Responsible Dropdown
function updateResponsibleOptions(){
  const sel = document.getElementById('cardResponsible');
  sel.innerHTML='';
  trip.participants.forEach(p=>{
    const opt = document.createElement('option'); opt.value=p; opt.textContent=p;
    sel.appendChild(opt);
  });
}

// Add Card
function addCard(){
  const title = document.getElementById('cardTitle').value.trim();
  const category = document.getElementById('cardCategory').value;
  const notes = document.getElementById('cardNotes').value.trim();
  const cost = parseFloat(document.getElementById('cardCost').value)||0;
  const responsible = document.getElementById('cardResponsible').value;
  const status = document.getElementById('cardStatus').value;
  if(!title){alert('Enter card title'); return;}
  trip.cards.push({title, category, notes, cost, responsible, status, votes:0});
  updateCards();
  document.getElementById('cardTitle').value='';
  document.getElementById('cardNotes').value='';
  document.getElementById('cardCost').value='0';
}

// Update Cards Display
function updateCards(){
  const list = document.getElementById('cards-list'); list.innerHTML='';
  trip.cards.sort((a,b)=>b.votes - a.votes);
  trip.cards.forEach((c,i)=>{
    const div = document.createElement('div'); div.className='card';
    div.innerHTML = `<h3>${c.title} [${c.category}]</h3>
    <p>${c.notes}</p>
    <p>Cost: $${c.cost}</p>
    <p>Responsible: ${c.responsible}, Status: ${c.status}</p>
    <p>Votes: ${c.votes}</p>
    <div class="flex">
      <button onclick="vote(${i},1)">Upvote</button>
      <button onclick="vote(${i},-1)">Downvote</button>
    </div>`;
    list.appendChild(div);
  });
  updateBudget();
}

// Voting
function vote(index, val){
  trip.cards[index].votes += val;
  updateCards();
}

// Budget Calculation
function updateBudget(){
  const budgetDiv = document.getElementById('budget-details');
  let total = trip.cards.reduce((sum,c)=>sum+c.cost,0);
  let perPerson = (trip.participants.length>0)?(total/trip.participants.length).toFixed(2):0;
  let html = `<p>Total Cost: $${total}</p>`;
  html += `<p>Cost per Person: $${perPerson}</p>`;
  budgetDiv.innerHTML = html;
}

// Generate Trip Plan
function generatePlan(){
  const planDiv = document.getElementById('trip-plan'); planDiv.innerHTML='';
  const chosen = trip.cards.filter(c=>c.votes>=0);
  if(chosen.length===0){planDiv.innerHTML='<p>No ideas added yet.</p>'; return;}
  chosen.forEach(c=>{
    const div = document.createElement('div'); div.className='card';
    div.innerHTML=`<h3>${c.title} [${c.category}]</h3>
    <p>${c.notes}</p>
    <p>Cost: $${c.cost}, Responsible: ${c.responsible}, Status: ${c.status}</p>`;
    planDiv.appendChild(div);
  });
}
</script>
</body>
</html>

